<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<!-- 
//====================================================================
// Project Name：巨星科技-土猫网最新Mybatis 架构版本    @Author Royal
// date:  2018-2-26 16:32:22
//====================================================================
!-->
<mapper namespace="com.toolmall.business.product.dao.PcProductSkuValueMapper">
	<resultMap id="RMPcProductSkuValue" type="com.toolmall.business.product.bean.PcProductSkuValue">
        <result property="id" column="id"/>
        <result property="propertyId" column="property_id"/>
        <result property="propertyName" column="property_name"/>
        <result property="valueId" column="value_id"/>
        <result property="valueName" column="value_name"/>
        <result property="valueFile" column="value_file"/>
		<result property="isVisible" column="is_visible"/>
        <result property="productSkuid" column="product_skuid"/>
        <result property="createTime" column="create_time"/>
	</resultMap>

    <select id="selectPageList" resultMap="RMPcProductSkuValue"  >
        SELECT * FROM pc_product_sku_value
       <include refid="findPagewhere"/>
    </select>

    <select id="selectPageCount" resultType="long"  >
        SELECT count(*) FROM pc_product_sku_value 
		<include refid="findPagewhere"/>    
    </select>
    
    <select id="search" parameterType="com.toolmall.business.product.bean.PcProductSkuValue" resultMap="RMPcProductSkuValue">
        SELECT * FROM pc_product_sku_value
        <include refid="searchWhere"/>
    </select>
	
	<select id="selectOne" resultMap="RMPcProductSkuValue"  >
        SELECT * FROM pc_product_sku_value
       <include refid="findPagewhere"/>
    </select>
	
	<select id="selectList" resultMap="RMPcProductSkuValue"  >
        SELECT * FROM pc_product_sku_value
       <include refid="findPagewhere"/>
    </select>
	    
    <select id="selectById" resultMap="RMPcProductSkuValue"  >
		SELECT * FROM pc_product_sku_value
		WHERE id = #{id}

	</select>

	<select id="findBySkuid" resultMap="RMPcProductSkuValue"  >
		SELECT * FROM pc_product_sku_value
		WHERE product_skuid = #{skuId}
	</select>


	
    <!-- useGeneratedKeys="true" keyProperty="xxx" for sqlserver and mysql -->
    <insert id="insert" parameterType="com.toolmall.business.product.bean.PcProductSkuValue"   useGeneratedKeys="true" keyColumn="id" keyProperty="id">
        INSERT INTO pc_product_sku_value (
        	property_id ,
        	property_name ,
        	value_id ,
        	value_name ,
        	value_file ,
        	is_visible ,
        	product_skuid
        ) VALUES (
        	#{propertyId} ,
        	#{propertyName} ,
        	#{valueId} ,
        	#{valueName} ,
        	#{valueFile} ,
        	#{isVisible} ,
        	#{productSkuid}
        )
	
	<!--
		oracle: order="BEFORE" SELECT sequenceName.nextval AS ID FROM DUAL 
		DB2: order="BEFORE"" values nextval for sequenceName
		<selectKey resultType="java.lang.Long" order="BEFORE" keyProperty="userId">
			SELECT sequenceName.nextval AS ID FROM DUAL 
        </selectKey>
	-->
	</insert>
    
	<insert id="insertByBatch" parameterType="java.util.List" >
        INSERT INTO pc_product_sku_value (
        	property_id ,
        	property_name ,
        	value_id ,
        	value_name ,
        	value_file ,
        	is_visible ,
        	product_skuid
        )VALUES
        <foreach collection="list" item="item" index="index" separator=",">
		(
        	#{item.propertyId} ,
        
        	#{item.propertyName} ,
        
        	#{item.valueId} ,
        
        	#{item.valueName} ,
        
        	#{item.valueFile} ,
        
        	#{item.isVisible} ,
        
        	#{item.productSkuid}
        )
        </foreach>
    </insert>
	
	<update id="update" parameterType="com.toolmall.business.product.bean.PcProductSkuValue" >
        UPDATE pc_product_sku_value
        <trim prefix="SET" prefixOverrides="," suffixOverrides=",">
			<if test="propertyId!=null">
	        property_id = #{propertyId} ,
	        </if>
	        <if test="propertyName!=null and propertyName!=''">
	        property_name = #{propertyName} ,
	         </if>
			<if test="valueId!=null">
	        value_id = #{valueId} ,
	        </if>
	        <if test="valueName!=null and valueName!=''">
	        value_name = #{valueName} ,
	         </if>
	        <if test="valueFile!=null and valueFile!=''">
	        value_file = #{valueFile} ,
	         </if>
			<if test="isVisible!=null">
	        is_visible = #{isVisible} ,
	        </if>
			<if test="productSkuid!=null">
	        product_skuid = #{productSkuid} ,
	        </if>
			<if test="createTime!=null">
	        create_time = #{createTime} 
	        </if>
	    </trim>    
        WHERE 
	       id = #{id} 
	</update>

	<update id="updateList" parameterType="java.util.List" >  
       UPDATE pc_product_sku_value SET state = '0' WHERE id IN  
       <foreach collection="list" item="id" open="(" separator="," close=")">  
#{id}       </foreach>  
    </update>

    <delete id="delete" >
        UPDATE pc_product_sku_value SET is_deleted='1' WHERE
        id = #{id} 
    </delete>
	
	<delete id="deleteByIds" >
        UPDATE pc_product_sku_value SET is_deleted = '1' WHERE
        id IN
        <foreach collection="ids" item="item" index="index" open="(" close=")" separator=",">
#{item}        </foreach>
    </delete>
	
	<sql id="findPagewhere">
		<where>
			 is_deleted = '0'
			 <if test="id!=null">
	         AND id = #{id} 
	         </if>
			 <if test="propertyId!=null">
	         AND property_id = #{propertyId} 
	         </if>
	        <if test="propertyName!=null and propertyName!=''">
	         AND property_name = #{propertyName} 
	         </if>
			 <if test="valueId!=null">
	         AND value_id = #{valueId} 
	         </if>
	        <if test="valueName!=null and valueName!=''">
	         AND value_name = #{valueName} 
	         </if>
	        <if test="valueFile!=null and valueFile!=''">
	         AND value_file = #{valueFile} 
	         </if>
			 <if test="isVisible!=null">
	         AND is_visible = #{isVisible} 
	         </if>
			 <if test="productSkuid!=null">
	         AND product_skuid = #{productSkuid} 
	         </if>
			 <if test="createTime!=null">
	         AND create_time = #{createTime} 
	         </if>
		</where>
	</sql>
	
    <sql id="searchWhere">
		<where>
			is_deleted = '0'
	        <if test="propertyName!=null and propertyName!=''">
			    AND property_name LIKE CONCAT('%','${propertyName}','%')
	         </if>
	        <if test="valueName!=null and valueName!=''">
			    AND value_name LIKE CONCAT('%','${valueName}','%')
	         </if>
		</where>
	</sql>
	
	<sql id="findDatewhere">
		<where>
			is_deleted = '0'
	       <if test="id!=null">
				AND id = #{id}
		   </if>
	       <if test="propertyId!=null">
				AND property_id = #{propertyId}
		   </if>
	       <if test="propertyName!=null and propertyName!=''">
				AND property_name = #{propertyName}
		   </if>
	       <if test="valueId!=null">
				AND value_id = #{valueId}
		   </if>
	       <if test="valueName!=null and valueName!=''">
				AND value_name = #{valueName}
		   </if>
	       <if test="valueFile!=null and valueFile!=''">
				AND value_file = #{valueFile}
		   </if>
	       <if test="isVisible!=null">
				AND is_visible = #{isVisible}
		   </if>
	       <if test="productSkuid!=null">
				AND product_skuid = #{productSkuid}
		   </if>
	       <if test="createTime!=null">
				AND create_time BETWEEN #{createTimeBegin} AND #{createTimeEnd}
		   </if>
		</where>
	</sql>
	
	<!-- 调用存储过程
	<select id="selectUserByProvinceAndCity" resultMap="BaseResultMap"  
        statementType="CALLABLE">  带 井号
        {CALL user_selectUserByCity_sp({provinceId,mode=IN,jdbcType=INTEGER},{cityId,mode=IN,jdbcType=INTEGER},{pageIndex,mode=IN,jdbcType=INTEGER},{pageSize,mode=IN,jdbcType=INTEGER})}  
    </select>  
	-->
	
	<delete id="deleteBySkuid" >
        UPDATE pc_product_sku_value SET is_deleted = '1' WHERE
        product_skuid = #{skuId} 
    </delete>
	
</mapper>

